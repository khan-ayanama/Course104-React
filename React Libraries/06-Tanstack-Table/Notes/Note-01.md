# Tanstack Table

It is headless UI Library.
`headless`: It means it only provide logic, state or processing but not markup or css.

## Installation

```bash
npm install @tanstack/react-table
```

## Table Columns

- It is used in building underlynig data model.
- Formatting the data model into what will be displayed in the table.
- Creating `headers` `footers` etc.

### Column Def Types

These types describes overall categories of column defs.

- `Accessor columns`: It has underlying data model which means they can be sorted, filtered or grouped etc.
- `Display Columns`: They do not have data model which means can't be sorted, they are used to display arbitray content in table. `row, actions, buttons` etc.
- `Grouping Columns`: They also not have a data model, it is used to groups other columns together

## Table Data

`Data`: Data is an array of object, object represents the data of row.

`Defining type of Data`

```ts
//TData
type User = {
  firstName: string;
  lastName: string;
  age: number;
  visits: number;
  progress: number;
  status: string;
};
```

### Give data a stable reference

```jsx
const fallbackData = []

export default function MyComponent() {
  //✅ GOOD: This will not cause an infinite loop of re-renders because `columns` is a stable reference
  const columns = useMemo(() => [
    // ...
  ], []);

  //✅ GOOD: This will not cause an infinite loop of re-renders because `data` is a stable reference
  const [data, setData] = useState(() => [
    // ...
  ]);

  // Columns and data are defined in a stable reference, will not cause infinite loop!
  const table = useReactTable({
    columns,
    data ?? fallbackData, //also good to use a fallback array that is defined outside of the component (stable reference)
  });

  return <table>...</table>;
}
```

Note: Upto some thousands of row tanstack can handle data easily

## Column Definations

This section helps in setting up column defination of table not actually doing anything on actual column objects generated by table instance.

`column Def`

- It creates underlying data model.
- Formatting data model into what will be displayed in the table.
- Creating `headers`, `header groups` and `footers`
- Creating some display only purpose eg: buttons, checkboxes, expanders etc.

`Column Def Types`

- `Accessor Columns`: It has underlying data models can be sorted, filtered etc.
- `Display Columns`: It doesn't have underlying data model but we can display buttons etc.
- `Grouping colummn`: It is used to group other columsn doesn't have underlying data models.

`Column Helpers`

`createColumnHelper` function given by react-table which is when called with the type of row gives utility to create column defination types with highest type-safety possible.

```jsx
import { createColumnHelper } from "@tanstack/react-table";
import { mockData } from "./MOCK_DATA";

//TData
type User = {
  firstName: string;
  lastName: string;
  age: number;
  visits: number;
  progress: number;
  status: string;
};

const data: User[] = mockData;

const columnHelper = createColumnHelper<User>();

const defaultColumns = [
  // Display Column
  columnHelper.display({
    id: "actions",
    cell: () => <button>Click Me!!</button>,
  }),

  // Grouping column
  columnHelper.group({
    header: "Name",
    footer: (props) => props.column.id,
    columns: [
      // Accessor Column
      columnHelper.accessor("firstName", {
        cell: (info) => info.getValue(),
        footer: (props) => props.column.id,
      }),
      // Accessor Column
      columnHelper.accessor((row) => row.lastName, {
        id: "lastName",
        cell: (info) => info.getValue(),
        header: () => <span>Last Name</span>,
        footer: (props) => props.column.id,
      }),
    ],
  }),

  // Grouping Column
  columnHelper.group({
    header: "Info",
    footer: (props) => props.column.id,
    columns: [
      // Accessor Column
      columnHelper.accessor("age", {
        header: () => "Age",
        footer: (props) => props.column.id,
      }),

      // Grouping Column
      columnHelper.group({
        header: "More Info",
        columns: [
          // Accessor column
          columnHelper.accessor("visits", {
            header: () => <span>Visits</span>,
            footer: (props) => props.column.id,
          }),
          // Accessor Column
          columnHelper.accessor("status", {
            header: "Status",
            footer: (props) => props.column.id,
          }),

          // Accessor Column
          columnHelper.accessor("progress", {
            header: "Profile Progress",
            footer: (props) => props.column.id,
          }),
        ],
      }),
    ],
  }),
];

const Employee = () => {
  console.log(data);
  return (
    <>
      <h2>Hello</h2>
    </>
  );
};

export default Employee;
```
